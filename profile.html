<script>
    document.addEventListener('DOMContentLoaded', () => {
        const feed = document.getElementById('track-feed');
        const nameHeader = document.getElementById('artist-name');
        const memory = MusicAIBrain.memory;

        // 1. Let the artist set their name (Optional but cool)
        const savedName = localStorage.getItem('sparkam_artist_name');
        if (savedName) {
            nameHeader.textContent = savedName;
        } else {
            const newName = prompt("What is your Artist Name?");
            if (newName) {
                localStorage.setItem('sparkam_artist_name', newName);
                nameHeader.textContent = newName;
            }
        }

        if (!memory.tracks || memory.tracks.length === 0) {
            feed.innerHTML = "<p>No tracks released yet. Head to the Studio!</p>";
            return;
        }

        feed.innerHTML = "";
        memory.tracks.reverse().forEach(track => {
            const trackLink = `fan-link.html?track=${encodeURIComponent(track.name)}`;
            const item = document.createElement('div');
            item.className = "track-card"; // You can style this in your CSS
            item.style.cssText = "background: #111; padding: 20px; border: 1px solid #333; border-radius: 12px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;";
            
            item.innerHTML = `
                <div style="text-align: left;">
                    <span style="font-weight: bold; display: block; color: #fff;">${track.name}</span>
                    <small style="color: #00ff41;">AI Optimized Strategy</small>
                </div>
                <button onclick="window.location.href='${trackLink}'" style="background: transparent; border: 1px solid #00ff41; color: #00ff41; padding: 8px 18px; border-radius: 20px; cursor: pointer;">View Link</button>
            `;
            feed.appendChild(item);
        });
    });
</script>
