<script>
    document.addEventListener('DOMContentLoaded', () => {
        const listEl = document.getElementById('campaign-list');
        const memory = MusicAIBrain.memory;

        if (!memory.tracks || memory.tracks.length === 0) {
            listEl.innerHTML = "<h2>No campaigns yet. Go to the Studio!</h2>";
            return;
        }

        listEl.innerHTML = "<h2>Active AI Campaigns</h2>";
        memory.tracks.reverse().forEach(track => {
            const campaign = PromotionEngine.generateCampaign(track);
            // Safety check for older tracks
            const displayDate = track.scheduledDate || "Date Pending Analysis";
            const displayTime = track.scheduledTime || "";

            const card = document.createElement('div');
            card.style.cssText = "background: #111; padding: 20px; border-radius: 10px; border-left: 5px solid #00ff41; margin-bottom: 20px;";
            card.innerHTML = `
                <h3 style="color: #00ff41;">${track.name}</h3>
                <p style="color: #ffaa00; font-size: 0.9rem; margin: 5px 0;">ðŸ“… AI SUGGESTED: ${displayDate} @ ${displayTime}</p>
                <p><strong>Strategy:</strong> ${track.recommendation}</p>
                <p style="background: #222; padding: 10px; border-radius: 5px;"><em>"${campaign.postContent}"</em></p>
                <button style="background: #00ff41; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;">Deploy Post</button>
            `;
            listEl.appendChild(card);
        });
    });
</script>
